# ===========================================
# MSSanté API - Configuration Example
# ===========================================
# Copier ce fichier vers .env.development ou .env.production
# et remplir avec les valeurs appropriées
# ===========================================

# ===========================================
# ENVIRONNEMENT
# ===========================================
NODE_ENV=development
PORT=3000
LOG_LEVEL=info

# ===========================================
# BASE DE DONNÉES POSTGRESQL
# ===========================================
DB_HOST=postgres
DB_PORT=5432
DB_NAME=mssante
DB_USER=mssante
DB_PASSWORD=CHANGE_ME_DB_PASSWORD
DB_SSL=false
DB_POOL_MIN=2
DB_POOL_MAX=10

# ===========================================
# REDIS (Cache & Sessions)
# ===========================================
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=CHANGE_ME_REDIS_PASSWORD
REDIS_DB=0
REDIS_TLS=false

# ===========================================
# JWT & SESSIONS
# ===========================================
JWT_SECRET=CHANGE_ME_JWT_SECRET_MIN_32_CHARS
JWT_EXPIRES_IN=3600
JWT_ISSUER=mssante-api
JWT_AUDIENCE=mssante-client
REFRESH_TOKEN_EXPIRES_IN=604800

# ===========================================
# PRO SANTÉ CONNECT (OAuth2/OIDC)
# ===========================================
PSC_CLIENT_ID=votre_client_id_psc
PSC_CLIENT_SECRET=votre_client_secret_psc
PSC_REDIRECT_URI=https://votre-domaine.mssante.fr/auth/psc/callback
PSC_AUTH_URL=https://auth.esw.esante.gouv.fr/auth/realms/esante-wallet/protocol/openid-connect/auth
PSC_TOKEN_URL=https://auth.esw.esante.gouv.fr/auth/realms/esante-wallet/protocol/openid-connect/token
PSC_USERINFO_URL=https://auth.esw.esante.gouv.fr/auth/realms/esante-wallet/protocol/openid-connect/userinfo
PSC_LOGOUT_URL=https://auth.esw.esante.gouv.fr/auth/realms/esante-wallet/protocol/openid-connect/logout
PSC_SCOPE=openid email profile scope_all

# ===========================================
# ANS - OPÉRATEUR
# ===========================================
OPERATOR_ID=VOTRE_ID_OPERATEUR_ANS
ANNUAIRE_API_URL=https://annuaire.sante.fr/api/v1
ANNUAIRE_API_KEY=votre_cle_api_annuaire

# ===========================================
# DOMAINE & URLs
# ===========================================
DOMAIN=votre-domaine.mssante.fr
API_URL=https://api.votre-domaine.mssante.fr
FRONTEND_URL=https://votre-domaine.mssante.fr

# ===========================================
# SMTP CONFIGURATION (Postfix)
# ===========================================
SMTP_HOST=postfix
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=
SMTP_PASSWORD=

# ===========================================
# IMAP CONFIGURATION (Dovecot)
# ===========================================
IMAP_HOST=dovecot
IMAP_PORT=143
IMAP_SECURE=false

# ===========================================
# EMAIL SETTINGS
# ===========================================
DEFAULT_FROM_EMAIL=noreply@votre-domaine.mssante.fr
ADMIN_EMAIL=admin@votre-domaine.mssante.fr

# ===========================================
# CERTIFICATS SSL/TLS
# ===========================================
SSL_CERT_PATH=/etc/ssl/certs/server.pem
SSL_KEY_PATH=/etc/ssl/private/server.key
SSL_CA_PATH=/etc/ssl/certs/igc-sante/ca-bundle.pem

# ===========================================
# RATE LIMITING
# ===========================================
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# ===========================================
# LOGGING
# ===========================================
LOG_DIR=/var/log/mssante-api
LOG_MAX_SIZE=10485760
LOG_MAX_FILES=30

# ===========================================
# CORS
# ===========================================
CORS_ORIGIN=https://votre-domaine.mssante.fr
CORS_CREDENTIALS=true

# ===========================================
# MONITORING (Optionnel)
# ===========================================
METRICS_ENABLED=false
METRICS_PORT=9090